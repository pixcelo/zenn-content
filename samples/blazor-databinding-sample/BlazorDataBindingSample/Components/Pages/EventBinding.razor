@page "/event-binding"
@rendermode InteractiveServer

<PageTitle>イベントバインディング</PageTitle>

<h1>イベントバインディング</h1>

<div class="card">
    <div class="card-header">
        <h3>マウスイベント</h3>
    </div>
    <div class="card-body">
        <button class="btn btn-primary" @onclick="OnClick">クリック</button>
        <button class="btn btn-secondary ms-2" @ondblclick="OnDoubleClick">ダブルクリック</button>

        <div class="mt-3 p-3 border rounded"
             @onmouseover="OnMouseOver"
             @onmouseout="OnMouseOut"
             style="background-color: @mouseOverColor;">
            マウスを乗せてください
        </div>

        <p class="mt-2">最後のイベント: <strong>@lastMouseEvent</strong></p>
        <p>クリック回数: <strong>@clickCount</strong></p>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h3>キーボードイベント</h3>
    </div>
    <div class="card-body">
        <input class="form-control"
               placeholder="ここに入力してください"
               @onkeydown="OnKeyDown"
               @onkeyup="OnKeyUp"
               @onkeypress="OnKeyPress" />

        <p class="mt-2">最後のキーイベント: <strong>@lastKeyEvent</strong></p>
        <p>押されたキー: <strong>@pressedKey</strong></p>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h3>フォームイベント</h3>
    </div>
    <div class="card-body">
        <div class="mb-3">
            <label class="form-label">onchange イベント:</label>
            <input class="form-control" @onchange="OnChange" />
            <p class="mt-2">変更された値: <strong>@changedValue</strong></p>
        </div>

        <div class="mb-3">
            <label class="form-label">oninput イベント:</label>
            <input class="form-control" @oninput="OnInput" />
            <p class="mt-2">入力中の値: <strong>@inputValue</strong></p>
        </div>

        <div class="mb-3">
            <label class="form-label">onfocus / onblur イベント:</label>
            <input class="form-control"
                   @onfocus="OnFocus"
                   @onblur="OnBlur"
                   style="border-color: @focusBorderColor;" />
            <p class="mt-2">フォーカス状態: <strong>@focusState</strong></p>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h3>イベント引数を使用</h3>
    </div>
    <div class="card-body">
        <button class="btn btn-info" @onclick="OnClickWithArgs">クリック位置を取得</button>
        <p class="mt-2">クリック位置: X=<strong>@clickX</strong>, Y=<strong>@clickY</strong></p>

        <div class="mt-3">
            <input class="form-control" @onkeydown="OnKeyDownWithArgs" placeholder="キー情報を取得" />
            <p class="mt-2">キーコード: <strong>@keyCode</strong></p>
            <p>修飾キー: Ctrl=<strong>@ctrlKey</strong>, Shift=<strong>@shiftKey</strong>, Alt=<strong>@altKey</strong></p>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h3>イベントの伝播制御</h3>
    </div>
    <div class="card-body">
        <div class="p-3 border rounded" @onclick="OnOuterClick" style="background-color: #f0f0f0;">
            外側のdiv（イベントが伝播します）
            <div class="p-3 mt-2 border rounded bg-white" @onclick="OnInnerClick">
                内側のdiv（クリックしてみてください）
            </div>
        </div>

        <div class="p-3 mt-3 border rounded" @onclick="OnOuterClick" style="background-color: #f0f0f0;">
            外側のdiv（イベントが伝播しません）
            <div class="p-3 mt-2 border rounded bg-white" @onclick="OnInnerClickStopPropagation" @onclick:stopPropagation="true">
                内側のdiv（stopPropagation=true）
            </div>
        </div>

        <p class="mt-2">最後のクリック: <strong>@lastClickTarget</strong></p>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h3>preventDefault</h3>
    </div>
    <div class="card-body">
        <form @onsubmit="OnSubmit" @onsubmit:preventDefault="true">
            <input class="form-control mb-2" placeholder="フォーム送信（ページ遷移なし）" />
            <button type="submit" class="btn btn-success">送信</button>
        </form>
        <p class="mt-2">送信回数: <strong>@submitCount</strong></p>
    </div>
</div>
