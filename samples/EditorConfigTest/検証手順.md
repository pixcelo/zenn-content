# EditorConfig自動修正検証手順

## セットアップ

### 1. Visual Studioの設定

1. **ツール → オプション → テキストエディター → C# → コードクリーンアップ**
2. 「コードクリーンアップの構成」を開く
3. **「EditorConfig で設定されたすべての警告とエラーを修正」**を「使用可能な修正ツール」から「含まれる修正ツール」に移動（↓ボタンで移動）
4. 「保存時にコードクリーンアッププロファイルを実行」にチェック

### 2. プロジェクトの再読み込み

- Visual Studioでプロジェクトをアンロード→再読み込み
- または、Visual Studioを再起動

## 検証方法

### ステップ1: `.editorconfig`を編集

`.editorconfig`ファイルを開き、以下の3つの設定の重大度を変更：

```ini
# warningレベルで検証（推奨）
csharp_style_implicit_object_creation_when_type_is_apparent = true:warning
csharp_prefer_braces = true:warning
csharp_using_directive_placement = outside_namespace:warning
```

### ステップ2: テストコードで検証

`TestAutoFix.cs`を開き、以下の違反コードが含まれていることを確認：

```csharp
namespace EditorConfigTest
{
    using System;  // 違反: namespace外に配置すべき
    
    class TestAutoFix
    {
        static void TestMethod()
        {
            List<string> names = new List<string>();  // 違反: new()を使うべき
            Dictionary<int, string> map = new Dictionary<int, string>();  // 違反: new()を使うべき
            
            if (names.Count > 0)
                Console.WriteLine("Items");  // 違反: 中括弧が必要
        }
    }
}
```

### ステップ3: 検証実行

各重大度レベル（`suggestion`、`warning`、`error`）で以下を確認：

1. **保存時の自動修正**
   - `TestAutoFix.cs`を開く
   - **Ctrl+S** で保存
   - 自動修正されるか確認

2. **コードクリーンアップ**
   - `TestAutoFix.cs`を開く
   - **Ctrl+K, Ctrl+E** でコードクリーンアップを実行
   - 修正されるか確認

3. **視覚的な表示**
   - 電球アイコンが表示されるか（suggestion）
   - 警告が表示されるか（warning）
   - エラーが表示されるか（error）

## 検証結果の記録

### suggestionレベル
- [ ] 保存時（Ctrl+S）に自動修正された
- [ ] コードクリーンアップ（Ctrl+K, Ctrl+E）で修正された
- [ ] 電球アイコンが表示された
- 備考: 

### warningレベル
- [ ] 保存時（Ctrl+S）に自動修正された
- [ ] コードクリーンアップ（Ctrl+K, Ctrl+E）で修正された
- [ ] 警告が表示された
- 備考: 

### errorレベル
- [ ] 保存時（Ctrl+S）に自動修正された
- [ ] コードクリーンアップ（Ctrl+K, Ctrl+E）で修正された
- [ ] エラーが表示された
- 備考: 

## 期待される結果

### warning/errorレベル（「EditorConfig で設定されたすべての警告とエラーを修正」を追加した場合）

- ✅ 保存時（Ctrl+S）に自動修正される
- ✅ コードクリーンアップ（Ctrl+K, Ctrl+E）で修正される
- ✅ `using`がnamespace外に移動される
- ✅ `new List<string>()`が`new()`に変換される
- ✅ `if`文に中括弧が追加される

### suggestionレベル

- ❌ 自動修正されない（「警告とエラーを修正」の対象外）

詳細な検証結果は `最終検証結果.md` を参照してください。
